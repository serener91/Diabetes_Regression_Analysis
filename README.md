# Diabetes_Regression_Analysis

### Author : Gukhwan Hyun

  * [Brief Summary](#brief-summary)
  * [Objective](#objective)  
  * [Dataset](#dataset)
  * [Data Analysis](#data-analysis)
  * [Model](#model)
  * [Model Validation](#model-validation)
  * [Machine Learning](#machine-learning)
  * [Conclusion](#conclusion)


## Brief Summary

목적 (Objective) : 공복혈당을 기준으로 당뇨병 여부 예측하기.

데이터 (Dataset) : 2019년 대한민국 국민건강검진내역

모델 (Model) : 1. 단순회귀분석 2.다중회귀분석

평가 (Evaluation) : BMI와 공복혈당은 통계적으로 유의한 상관관계를 가진다. 

## Objective

‘20년 기준, 당뇨병은 대한민국 30세이상 성인 7명 중 1명이 앓고 있는 상당히 흔하지만 확실한 치료법은 존재하지 않는 무서운 질병이다. 그래도 다행인 점은 대부분의 당뇨병 환자는 후천적인 이유로 발생하는 2종 당뇨 환자이므로, 식생활, 생활습관 개선등을 통해 예방이 가능하다는 사실이다. 따라서 대한민국 전 국민을 대상으로 실시하는 국민건강검진 내역을 바탕으로 당뇨병을 예방할 수 있다면 국민의 삶의 질 뿐만 아니라 국가 예산 절약도 기대해 볼 수 있겠다. 

### 연구가설 (Hypothesis):
* BMI (Body Mass Index) 지수가 높을 수록 공복혈당은 높을 것이다. 

### 논리 (Logic):
* BMI가 높다는 것은 그만큼 필요이상의 에너지를 섭취한다는 뜻이고, 몸이 처리하지 못한 잔여 에너지(포도당)가 혈액에서 검출될 것이다. 

### 인과관계 (Correlation) 예측 : Positively Proportional (+)
* 원인 (독립변수) : BMI (Body Mass Index)

* 결과 (종속변수) : 공복혈당 (Fasting Blood Sugar)

## Dataset

### 원본데이터 (1,063,618 rows by 34 cols)
* 공복혈당, 지역, 성별, 연령, 신장, 체중, 시력, 청력, 혈압, 흡연, 음주 등 기본적 건강 상태를 알 수 있는 데이터로 구성되어 있음. 

### 분석용데이터 (1,052,215 rows by 11 columns)
* BMI, 고혈압여부, 요단백, 성별, 지역, 연령, 혈색소, 감마지티피 등 공복혈당과 관련이 있어 보이는 데이터로 전처리해서 구성. 

* 특성공학
  * BMI = 체중 / (신장^2) 
  * 고혈압여부 : 수축기 혈압 140, 이완기 혈압 90 이상

* 수치형 데이터: 공복혈당, 혈색소, 감마지티피, BMI

* 범주형 데이터: 지역, 성별, 요단백수치, 흡연여부, 연령대, 고혈압여부

## Data Analysis

1.수치형 데이터
	
* BMI, 혈색소는 정규분포를 따르며, 공복혈당과 상관관계지수가 각 0.178, 0.107로 약하지만 상관관계는 있는 것으로 판단. 

* 공복혈당에 이상치 3개 존재하여 제거


2.범주형 데이터

* 남부지역 (전라도, 광주광역시) 의 평균공복혈당이 가장 높게 나타나는데 아마도 나트륨 섭취량과 공복혈당 간에 상관관계가 있을 것으로 추정. 하지만 실제로 지역이라는 특성과 공복혈당간의 관계는 알 수 없음.

* 남성이 평균적으로 여성보다 높은 평균공복혈당을 가짐. 성별간의 신진대사량의 차이 때문으로 예상되나, 정확한 이유는 좀 더 자세한 의학적 지식이 요구됨. 

* 요단백 치수와 평균공복혈당은 확실한 양의 상관관계를 가짐

* 나이와 평균공복혈당은 완만한 양의 상관관계를 가짐. 세종특별자치시의 평균공복혈당이 가장 낮은 이유도 여기서 비롯된 것으로 추정. 

* 고혈압여부, 흡연여부는 평균공복혈당과 완만한 양의 상관관계를 가짐. 

## Model

### 1. 단순회귀분석 (Simple Linear Regression Analysis)

공복혈당(Fasting Blood Sugar) ~ BMI

#### 모형적합도 : 
Fasting_Blood_Sugar에 대하여 BMI로 예측하는 회귀분석을 실시한 결과, 이 회귀모형은 통계적으로 유의미 하였다 (F(1,1052213) = 3.443e+04, p < 0.05).

#### 독립변수 : 
BMI의 회귀계수는 1.1676 로, Fasting_Blood_Sugar에 대하여 유의미한 예측 변수인 것으로 나타났다 (t(1052213) = 185.565, p < 0.05).

### 2. 다중회귀분석 (Multiple Linear Regression Analysis)

공복혈당(Fasting Blood Sugar) ~ BMI + 혈색소 + 성별 + 고혈압 + 흡연 + 요단백

#### 모형적합도 : 
회귀모형은 통계적으로 유의하였다 (F(10,1052201) = 6029, p < 0.05).

독립변수들 또한 모두 p < 0.05 로 유의하였다.

## Model Validation
* 모델 유의성 검정 : 

Fasting_Blood_Sugar에 대하여 BMI로 예측하는 회귀분석을 실시한 결과, 이 회귀모형은 통계적으로 유의미 하였다 (F(1,1052213) = 3.443e+04, p < 0.05).

* 모델 설명력 측정 :

R-squared 값은 0.032. 공복혈당의 분산의 3%정도를 설명함

* 잔차분석 :

잔차는 정규성, 등분산성, 독립성을 모두 만족한다.

## Machine Learning
* 검정결과 모델이 데이터에 대해 통계적으로 유의하므로, 머신러닝으로 수치 예측을 실시하였다.

* 데이터 분류 (훈련 80%, 테스트 20%)

* 선형 회귀 모델 (공복혈당 ~ BMI)

|   | 훈련  | 테스트  |
|---|---|---|
| RMSE   | 23.3  | 23.36  |


* 다중 회귀 모델 (공복혈당 ~ BMI + 혈색소 + 감마지티피 + 지역 + 성별 + 요단백 + 흡연 + 연령 + 고혈압)

|   | 훈련  | 테스트  |
|---|---|---|
| RMSE   | 22.38  | 22.28  |

## Conclusion
회귀분석 결과 BMI와 공복혈당은 통계적으로 유의한 상관관계를 가지지만, R-squared 가 3% 정도로 매우 낮게 나타나 공복혈당의 분산에 대하여 적은 영향력을 가진다는 것을 알 수 있었다. 그러나 신체 활동은 매우 복잡한 메커니즘을 가지고 있으므로 한가지 요인이 3% 정도의 영향력을 가지는 것은 무시할 수 없다고 판단된다.

일반적으로 공복혈당 정상치는 70~99 mg/dL 이며 추가로 8시간 이상 공복후 혈당치 126 mg/dL 이상이면 당뇨병으로 진단한다. 

머신러닝 결과, RMSE가 약 22 정도로 나타났는데, 공복혈당 정상 최저치 기준으로 +22이어도 90mg/dL으로 정상치 범주에 속하고, 최고치인 경우에도 126mg/dL 이하이므로 오차범위는 납득할만한 범위라고 판단된다.
